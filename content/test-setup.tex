% !TeX root = ../thesis.tex

\chapter{Test Setup}
\label{sec:test-setup}

We perform our attacks against Windows 11 on three different setups, as even though all three \ac{UEFI} firmwares used, are \cite{pi-spec} compliant, there still are many things left up to the \acp{OEM} to decide, when implementing a firmware image.

\section{\acs{QEMU}}
\label{sec:test-setup:qemu}

Our main development setup is an emulated environment using the emulator \program{\ac{QEMU}} \cite{qemu} together with the \ac{OVMF} image, from \ac{EDK} II using version\code{edk2-stable202208}.
For Secure Boot we generate our own \ac{PK} and use the \emph{Microsoft Corporation \acs{KEK} \acsu{CA} 2011} and the two signature \acp{DB} \emph{Microsoft Windows Production PCA 2011} and \emph{Microsoft Corporation UEFI CA 2011} provided by Microsoft.
For BitLocker and to fullfill Windows 11's general requirement that a \ac{TPM} 2.0 is present, we use \program{swtpm}.
A \ac{TPM} emulated in software \cite{swtpm}.
Accessing the firmware image with this setup is done through simple file access.

\section{Lenovo Ideapad 5 Pro-16ACH6}
\label{sec:test-setup:lenovo}

Lenovo Ideapad 5 Pro-16ACH6

% https://www.lenovo.com/de/de/laptops/ideapad/500-series/IdeaPad-5-Pro-16ACH6/p/88IPS501619?orgRef=https%253A%252F%252Fwww.google.com%252F

microsoft device guard

secure boot default keys
\emph{Microsoft Windows Production PCA 2011}

This can be done by using a spi flash programmer and clamping the physical chip. \TODO{FLASHROM}

\section{ASRock A520M-HVS}
\label{sec:test-setup:asrock}

\TODO{describe test setup}


secure boot und bitlocker

% https://www.asrock.com/mb/AMD/A520M-HVS/index.asp#BIOS

A520M-HVS 2.30 latest firmware at time of writing
Ryzen 5 5600X Zen 3

secure boot default keys
\emph{Microsoft Windows Production PCA 2011}


flashrom -p internal
SPI chip emulator. \TODO{EM100}
